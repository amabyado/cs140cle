#include <linux/kernel.h>
#include <linux/syscalls.h>
#include <linux/sched.h>

SYSCALL_DEFINE1(getname, char *, buffer) {
    printk("getname: %s\n", get_current()->comm);
    strcpy(buffer, get_current()->comm);

    return strlen(buffer);
}

#include <stdio.h>
#include <unistd.h>
#include <linux/kernel.h>
#include <sys/syscall.h>

int main() {
    char buffer[100];
    long length = syscall(549, buffer);

    printf("Process name is: %s\n", buffer);
    printf("Name is %ld characters long\n", length);
}
